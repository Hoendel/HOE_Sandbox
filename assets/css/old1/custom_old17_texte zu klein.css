/* ===========================================================
   0) Farb‑Tokens (Material: default/slate) + Aliasse
   =========================================================== */

/* Helles Schema */
[data-md-color-scheme="default"]{
  --md-primary-fg-color:           #B04F34; /* Marsrot */
  --md-primary-fg-color--light:    #C65B3C;
  --md-primary-fg-color--dark:     #8E3F2A; /* für Suchfeld & Untermenüs */
  --md-accent-fg-color:            #8F9CA3; /* Kometensilber */

  --color-main:    var(--md-primary-fg-color);
  --color-accent:  var(--md-accent-fg-color);

  --on-main-dim:    rgba(0,0,0,.85);
  --on-main-strong: #000;          /* Hell = Schwarz */
  --nav-text:       var(--md-default-fg-color);
  --link-color:     #0645AD;

  /* Lupenfaktoren (nur Schrift, kein Transform) */
  --zoom-font: 1.08;
  --zoom-font-active: 1.08;

  /* Basis-Typografie */
  --base-font-size: 16px;
  --base-line-height: 1.6;
}

/* Dunkles Schema */
[data-md-color-scheme="slate"]{
  --md-primary-fg-color:           #B04F34;
  --md-primary-fg-color--light:    #D16651;
  --md-primary-fg-color--dark:     #8E3F2A;
  --md-accent-fg-color:            #B0BEC5;

  --color-main:    var(--md-primary-fg-color);
  --color-accent:  var(--md-accent-fg-color);

  --on-main-dim:    rgba(255,255,255,.90);
  --on-main-strong: #fff;          /* Dunkel = Weiß */
  --nav-text:       var(--md-default-fg-color);
  --link-color:     #90CAF9;

  --zoom-font: 1.08;
  --zoom-font-active: 1.08;

  --base-font-size: 16px;
  --base-line-height: 1.6;
}


/* ===========================================================
   1) Basis-Reset & Typografie
   =========================================================== */

:root{
  font-size: var(--base-font-size);
}

body{
  line-height: var(--base-line-height);
  color: var(--md-default-fg-color);
  background: var(--md-default-bg-color);
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

*,
*::before,
*::after{
  box-sizing: border-box;
}

a{
  color: var(--link-color);
  text-decoration: none;
}
a:hover,
a:focus{
  text-decoration: underline;
}

img{ max-width:100%; height:auto; border:0; }

/* Material-Theme „Deko“-Pseudoelemente abschalten, wo störend */
.md-nav__link::before{ content:none !important; }


/* ===========================================================
   2) Header, Tabs, Footer – Grundlayout & Farben
   =========================================================== */

.md-header,
.md-tabs,
.md-footer{
  background-color: var(--color-main) !important;
}

/* Text & Icons im Header/Top-Menü folgen Modusfarbe */
.md-header .md-header__title,
.md-header .md-header__title .md-ellipsis,
.md-header a,
.md-header .md-header__button,
.md-header .md-header__button .md-icon,
.md-tabs__link,
.md-tabs__link .md-ellipsis,
.md-tabs__link .md-icon{
  color: var(--on-main-strong) !important;
  fill: currentColor !important;
  stroke: currentColor !important;
}

/* Kein Farbwechsel bei Hover/Klick im Header/Top-Menü */
:where(.md-header a, .md-header__button, .md-tabs__link):hover,
:where(.md-header a, .md-header__button, .md-tabs__link):active{
  color: var(--on-main-strong) !important;
}

/* Tabs zweizeilig, nichts abschneiden */
.md-tabs{ overflow: visible !important; }
.md-tabs__list{
  display:flex !important;
  flex-wrap:wrap !important;
  justify-content:center !important;
  gap:.4rem .8rem !important;
  padding:.5rem 1rem !important;
}
.md-tabs__item{ flex:0 1 auto !important; max-width:none !important; }
.md-tabs__link{
  display:flex !important;
  flex-direction:column !important;
  align-items:center !important;
  gap:.2rem !important;
  padding:.6em .8em !important;
  font-size:.75rem !important;
  line-height:1.2;
}
.md-tabs__link .md-icon{ font-size:1.4rem; margin-bottom:.2em; }

/* Lupen-Effekt (nur Schrift) + aktiv „eingefroren“ */
.md-tabs__link .md-ellipsis{
  transition: font-size .18s ease, font-weight .18s ease;
}
.md-tabs__link:hover .md-ellipsis{
  font-size: calc(1em * var(--zoom-font));
  font-weight: 700;
}
.md-tabs__link--active .md-ellipsis{
  font-size: calc(1em * var(--zoom-font-active));
  font-weight: 700;
}

/* Header/Footer niemals horizontal scrollen */
.md-header, .md-footer{ overflow-x: hidden; }

/* Footer-Grundstruktur */
.md-footer,
.md-footer__inner,
.md-footer-nav,
.md-footer-meta{
  background-color: var(--color-main) !important;
  border-top:none !important;
}

/* Footer-Navigation (Zurück/Weiter) – zweizeilig bei Bedarf */
.md-footer-nav{
  display:flex;
  flex-wrap: wrap;      /* bricht auf 2 Zeilen */
  gap: .5rem 1rem;
}
.md-footer-nav__link{
  white-space: normal;
  overflow-wrap: anywhere;
  max-width: 45vw;      /* 2 Spalten bei breiten Screens */
  padding-block: .55rem !important;
}
@media (max-width: 900px){
  .md-footer-nav__link{ max-width: 100%; } /* untereinander */
}

/* Footer-Links & -Meta (inkl. Social) – Farbe & Lupe, kein Farbwechsel */
.md-footer-nav__link,
.md-footer__link,
.md-footer-meta a{
  color: var(--on-main-strong) !important;
  fill: currentColor !important;
  stroke: currentColor !important;
  transition: font-size .18s ease, font-weight .18s ease;
}
.md-footer-nav__link:hover,
.md-footer__link:hover,
.md-footer-meta a:hover{
  font-size: calc(1em * var(--zoom-font));
  font-weight: 700;
}


/* ===========================================================
   3) Suche im Header – Pill
   =========================================================== */

.md-header .md-search__form{
  background-color: var(--md-primary-fg-color--dark) !important;
  border-radius: 12px !important;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.15) !important;
}
.md-header .md-search__input{ color: var(--on-main-dim) !important; }
.md-header .md-search__icon { color: var(--on-main-dim) !important; }
.md-header .md-search__input::placeholder{
  color: color-mix(in srgb, var(--on-main-dim) 70%, transparent) !important;
}
.md-header .md-search__form:focus-within{
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--on-main-strong) 35%, transparent) !important;
}


/* ===========================================================
   4) Sidebars & TOC – Pills, Untermenüs, Basislinks
   =========================================================== */

/* Linke Sidebar: Abschnittstitel als Pill (Top-Level) */
.md-sidebar--primary .md-nav__item--section > label.md-nav__link,
.md-sidebar--primary .md-nav__item--section > .md-nav__link.md-nav__link--index{
  background: var(--color-main) !important;
  color: var(--on-main-dim) !important;
  border-radius: 12px !important;
  padding: .40rem .70rem !important;
  width: 100% !important;
  box-sizing: border-box !important;
  transition: padding .16s ease, box-shadow .16s ease, color .16s ease;
}
.md-sidebar--primary .md-nav__item--section > label.md-nav__link:hover,
.md-sidebar--primary .md-nav__item--section > .md-nav__link.md-nav__link--index:hover{
  padding: .50rem .90rem !important;  /* wirkt wie „wächst“, Breite bleibt */
  box-shadow: 0 0 0 .15rem rgba(0,0,0,0.06);
  color: var(--on-main-strong) !important;
}

/* Linke Sidebar: Untermenü‑Pills (Farbe wie Suchfeld) */
.md-sidebar--primary .md-nav__item--section .md-nav__item--section > label.md-nav__link,
.md-sidebar--primary .md-nav__item--section .md-nav__item--section > .md-nav__link.md-nav__link--index{
  background: var(--md-primary-fg-color--dark) !important;
  color: var(--on-main-dim) !important;
  border-radius: 12px !important;
  padding: .40rem .70rem !important;
  box-sizing: border-box !important;
  transition: padding .16s ease, box-shadow .16s ease, color .16s ease;
}
.md-sidebar--primary .md-nav__item--section .md-nav__item--section > label.md-nav__link:hover,
.md-sidebar--primary .md-nav__item--section .md-nav__item--section > .md-nav__link.md-nav__link--index:hover{
  padding: .50rem .90rem !important;
  box-shadow: 0 0 0 .15rem rgba(0,0,0,0.06);
  color: var(--on-main-strong) !important;
}

/* 3. Ebene leicht abgesetzt */
.md-sidebar--primary .md-nav__item--section .md-nav__item--section .md-nav__item--section > label.md-nav__link,
.md-sidebar--primary .md-nav__item--section .md-nav__item--section .md-nav__item--section > .md-nav__link.md-nav__link--index{
  background: color-mix(in srgb, var(--md-primary-fg-color--dark) 88%, #fff 12%) !important;
}

/* Basis-Links in beiden Sidebars: Zeilenumbruch erlauben */
.md-nav--primary .md-nav__link,
.md-nav--secondary .md-nav__link{
  color: var(--nav-text) !important;
  background: transparent !important;
  white-space: normal;
  overflow-wrap: anywhere;
  max-width: 100%;
}

/* Rechte Sidebar (TOC) im normalen Flow (keine Mini-Scrollbox) */
.md-sidebar--secondary,
.md-nav--secondary{ overflow: visible; }

/* TOC‑Titel als Pill (mit Padding‑Wachstum) */
.md-nav--secondary .md-nav__title{
  background: var(--color-main) !important;
  color: var(--on-main-dim) !important;
  border-radius: 12px !important;
  padding: .40rem .70rem !important;
  margin: 0 .5rem 0 .25rem !important;
  width: calc(100% - .75rem) !important;
  box-sizing: border-box !important;
  transition: padding .16s ease, box-shadow .16s ease, color .16s ease;
}
.md-nav--secondary .md-nav__title:hover{
  padding: .50rem .90rem !important;
  box-shadow: 0 0 0 .15rem rgba(0,0,0,0.06);
  color: var(--on-main-strong) !important;
}

/* Lupen‑Effekte in Sidebars */
.md-sidebar--primary .md-nav__item > .md-nav__link .md-ellipsis,
.md-nav--secondary .md-nav__link .md-ellipsis{
  transition: font-size .18s ease, font-weight .18s ease;
}
.md-sidebar--primary .md-nav__item > .md-nav__link:hover .md-ellipsis,
.md-nav--secondary .md-nav__link:hover .md-ellipsis{
  font-size: calc(1em * var(--zoom-font));
  font-weight: 700;
}
.md-sidebar--primary .md-nav__item--active > .md-nav__link .md-ellipsis,
.md-sidebar--primary .md-nav__link--active .md-ellipsis,
.md-nav--secondary .md-nav__item--active > .md-nav__link .md-ellipsis,
.md-nav--secondary .md-nav__link--active .md-ellipsis{
  font-size: calc(1em * var(--zoom-font-active));
  font-weight: 700;
}


/* ===========================================================
   5) Überschriften (H1–H3)
   =========================================================== */

h1, h2, h3{
  clear: both;
  font-weight: 700 !important; /* immer fett */
}
h1{
  margin: 2.5rem 0 1.5rem;
  font-size: 2rem;
  line-height: 1.3;
}
h2{
  margin: 2rem 0 1.2rem !important;
  border-bottom: 2px solid var(--color-main);
  padding-bottom: .3rem;
}
h3{
  margin: 1.5rem 0 1rem !important;
  padding-left: .6rem !important;
  border-left: 3px solid var(--color-accent);
}
@media (max-width: 768px){
  h1{ font-size: 1.7rem; }
  h2{ font-size: 1.3rem; }
  h3{ font-size: 1.1rem; }
}


/* ===========================================================
   6) Textblöcke (Standard & ausklappbar) + Admonitions
   =========================================================== */

/* Einheitliche Schrift für Boxen */
.textbox, .textblock,
.md-typeset .admonition,
.md-typeset details.admonition{
  font-size: 1rem !important;
  line-height: 1.6 !important;
}

/* Standard-Textblock */
.textbox, .textblock{
  border:3px solid var(--color-main);
  background-color: var(--md-default-bg-color);
  color: var(--md-default-fg-color);
  padding:1rem 1.5rem;
  margin:2rem auto;
  border-radius:8px;
  box-sizing:border-box;
  max-width:100%;
}
@media (min-width:768px){
  .textbox, .textblock{ max-width:800px; }
}

/* Ausklappbare Box (<details class="textbox|textblock">) */
details.textbox, details.textblock{
  margin: 1.5rem auto;
  border:2px solid var(--color-accent);
  border-radius:8px;
  overflow:hidden;
  max-width:100%;
}
@media (min-width:768px){
  details.textbox, details.textblock{ max-width:800px; }
}
details.textbox summary, details.textblock summary{
  background-color: var(--color-main);
  color: var(--on-main-strong);
  font-weight:700;
  padding:.75rem 1rem;
  cursor:pointer;
  list-style:none;
  position:relative;
}
details.textbox summary::after, details.textblock summary::after{
  content:"▶";
  position:absolute;
  right:1rem;
  transition: transform .3s ease;
}
details.textbox[open] summary::after,
details.textblock[open] summary::after{
  transform: rotate(90deg);
}
details.textbox > *:not(summary),
details.textblock > *:not(summary){
  padding:1rem;
  background-color:var(--md-default-bg-color);
  color:var(--md-default-fg-color);
}
details.textbox[open], details.textblock[open]{
  animation: tb-fadein .25s ease-in-out;
}
@keyframes tb-fadein{ from{opacity:0} to{opacity:1} }

/* Admonition-Boxen (!!! info/tip/warning/danger/note) */
.md-typeset .admonition,
.md-typeset details.admonition{
  border:3px solid transparent;
  border-radius:8px;
  padding:1rem 1.5rem;
  margin:2rem 0;
  background-color:var(--md-default-bg-color);
  color:var(--md-default-fg-color);
}
.md-typeset .admonition-title{
  font-weight:700;
  font-size:1rem;
  margin-bottom:.5rem;
}
/* Rahmenfarben */
.md-typeset .admonition.info{    border-color:var(--color-accent); }
.md-typeset .admonition.tip{     border-color:#4CAF50; }
.md-typeset .admonition.warning{ border-color:#FFA000; }
.md-typeset .admonition.danger{  border-color:#C62828; }
.md-typeset .admonition.note{    border-color:var(--md-default-fg-color); }


/* ===========================================================
   7) Medien, Content‑Links & Utilities
   =========================================================== */

article img{
  display:block;
  margin:1rem auto;
  max-width:80%;
  border-radius:.5rem;
}
video, iframe{
  max-width:100%;
  width:100%;
  height:auto;
  display:block;
  margin:1rem auto;
}

/* Bildbreiten‑Utilities */
.width25{ width:25% !important; margin-inline:auto; display:block; }
.width33{ width:33% !important; margin-inline:auto; display:block; }
.width50{ width:50% !important; margin-inline:auto; display:block; }
.width66{ width:66% !important; margin-inline:auto; display:block; }
.width75{ width:75% !important; margin-inline:auto; display:block; }
.width90{ width:90% !important; margin-inline:auto; display:block; }
@media (max-width:500px){
  .width25, .width33, .width50, .width66, .width75, .width90{
    width:100% !important;
  }
}

/* Content‑Links im Fließtext */
.md-typeset a{ color: var(--link-color); }


/* ===========================================================
   8) Fokus-Styles (A11y)
   =========================================================== */

:where(a, button, .md-nav__link, .md-tabs__link, .md-header__button, .md-search__form):focus-visible,
:where(a, button, .md-nav__link, .md-tabs__link, .md-header__button, .md-search__form) :focus-visible{
  outline: 2px solid color-mix(in srgb, var(--on-main-strong) 35%, transparent);
  outline-offset: 2px;
  box-shadow: none !important;
}


/* ===========================================================
   9) Mobile-Optimierung (Touch = :active / :focus-visible)
   =========================================================== */

@media (hover:none) and (pointer:coarse){
  a, button { -webkit-tap-highlight-color: rgba(0,0,0,0.08); }

  :root{
    --zoom-font-mobile: var(--zoom-font, 1.08);
    --zoom-font-mobile-active: var(--zoom-font-active, 1.08);
  }

  /* Top (Header + Tabs) – Touch-Lupe */
  .md-header a .md-ellipsis,
  .md-header__button .md-ellipsis,
  .md-tabs__link .md-ellipsis{ transition: font-size .16s ease, font-weight .16s ease; }
  .md-header a:active .md-ellipsis,
  .md-header__button:active .md-ellipsis,
  .md-tabs__link:active .md-ellipsis{
    font-size: calc(1em * var(--zoom-font-mobile)); font-weight:700;
  }
  .md-tabs__link--active .md-ellipsis{
    font-size: calc(1em * var(--zoom-font-mobile-active)); font-weight:700;
  }

  /* Linke Sidebar – Touch-Lupe nur Text */
  .md-sidebar--primary .md-nav__item > .md-nav__link .md-ellipsis{ transition: font-size .16s ease, font-weight .16s ease; }
  .md-sidebar--primary .md-nav__item > .md-nav__link:active .md-ellipsis,
  .md-sidebar--primary .md-nav__item > .md-nav__link:focus-visible .md-ellipsis{
    font-size: calc(1em * var(--zoom-font-mobile)); font-weight:700;
  }
  .md-sidebar--primary .md-nav__item--active > .md-nav__link .md-ellipsis,
  .md-sidebar--primary .md-nav__link--active .md-ellipsis{
    font-size: calc(1em * var(--zoom-font-mobile-active)); font-weight:700;
  }
  .md-sidebar--primary .md-nav__item--section > label.md-nav__link,
  .md-sidebar--primary .md-nav__item--section > .md-nav__link.md-nav__link--index{
    padding-block:.55rem !important; /* größere Touchfläche */
  }

  /* Rechte Sidebar (TOC) – Touch-Lupe nur Text */
  .md-nav--secondary .md-nav__link .md-ellipsis{ transition: font-size .16s ease, font-weight .16s ease; }
  .md-nav--secondary .md-nav__link:active .md-ellipsis,
  .md-nav--secondary .md-nav__link:focus-visible .md-ellipsis{
    font-size: calc(1em * var(--zoom-font-mobile)); font-weight:700;
  }
  .md-nav--secondary .md-nav__item--active > .md-nav__link .md-ellipsis,
  .md-nav--secondary .md-nav__link--active .md-ellipsis{
    font-size: calc(1em * var(--zoom-font-mobile-active)); font-weight:700;
  }
  .md-nav--secondary .md-nav__title{ padding-block:.55rem !important; }

  /* Footer – zweizeilig & Touch-Lupe */
  .md-footer, .md-footer__inner{ overflow-x:hidden; }
  .md-footer-nav{ display:flex; flex-wrap:wrap; gap:.5rem .75rem; }
  .md-footer-nav__link{
    white-space:normal; overflow-wrap:anywhere; max-width:100%;
    padding-block:.65rem !important;
  }
  .md-footer-nav__link .md-ellipsis,
  .md-footer__link .md-ellipsis,
  .md-footer-meta a .md-ellipsis{ transition: font-size .16s ease, font-weight .16s ease; }
  .md-footer-nav__link:active .md-ellipsis,
  .md-footer__link:active .md-ellipsis,
  .md-footer-meta a:active .md-ellipsis{
    font-size: calc(1em * var(--zoom-font-mobile)); font-weight:700;
  }
}


/* ===========================================================
   10) Bewegungs-Reduktion respektieren
   =========================================================== */

@media (prefers-reduced-motion: reduce){
  .md-header a .md-ellipsis,
  .md-header__button .md-ellipsis,
  .md-tabs__link .md-ellipsis,
  .md-nav__link .md-ellipsis,
  .md-footer-nav__link .md-ellipsis,
  .md-footer__link .md-ellipsis,
  .md-footer-meta a .md-ellipsis{
    transition:none;
  }
}
