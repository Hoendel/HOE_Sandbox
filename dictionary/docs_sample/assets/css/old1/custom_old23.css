/* ===========================================================
   0) Skalierung & Mapping (kompatibel zu scale.js)
   =========================================================== */

/* scale.js setzt --layout-scale (DEF z.B. 1.20). */
:root{
  --layout-scale: 1.00;               /* Fallback, wird von scale.js überschrieben */
  --user-font-scale: var(--layout-scale); /* Mapping für alte Regeln */
  --user-lineheight-scale: 1;
  --zoom-font: 1.08;
  --zoom-font-active: 1.08;
}

html{ font-size: calc(100% * var(--layout-scale)); }

body, .md-typeset{
  font-size: calc(1rem * var(--user-font-scale));
  line-height: calc(1.6 * var(--user-lineheight-scale));
  overflow-wrap:anywhere; word-break:normal;
}

/* Kopfmenü, linkes Menü, TOC-Unterpunkte gleich groß */
.md-header .md-header__title,
.md-header a,
.md-header .md-header__button,
.md-tabs__link,
.md-sidebar--primary .md-nav__link,
.md-sidebar--secondary .md-nav__link{
  font-size: 1rem !important;
  line-height: 1.3;
}

/* Menü-Überschriften (links & rechts) etwas größer */
.md-sidebar--primary .md-nav__title,
.md-sidebar--secondary .md-nav__title{
  font-size: 1.15rem !important;
  font-weight: 700;
  line-height: 1.35;
}

/* Sicherer Umbruch bei großer Schrift */
.md-nav__link{ white-space:normal; overflow-wrap:anywhere; max-width:100%; }


/* ===========================================================
   0b) Farben (Mars‑Rot) – default & slate
   =========================================================== */

:root[data-md-color-scheme="default"]{
  --md-primary-fg-color:        #B04F34 !important;
  --md-primary-fg-color--light: #C65B3C !important;
  --md-primary-fg-color--dark:  #8E3F2A !important;
  --md-accent-fg-color:         #8F9CA3 !important;

  --on-main-dim:    rgba(0,0,0,.85);
  --on-main-strong: #000;
  --nav-text:       var(--md-default-fg-color);
  --link-color:     #0645AD;
}

:root[data-md-color-scheme="slate"]{
  --md-primary-fg-color:        #B04F34 !important;
  --md-primary-fg-color--light: #D16651 !important;
  --md-primary-fg-color--dark:  #8E3F2A !important;
  --md-accent-fg-color:         #B0BEC5 !important;

  --on-main-dim:    rgba(255,255,255,.90);
  --on-main-strong: #fff;
  --nav-text:       var(--md-default-fg-color);
  --link-color:     #90CAF9;
}

:root{ --color-main: var(--md-primary-fg-color); --color-accent: var(--md-accent-fg-color); }


/* ===========================================================
   1) Header, Tabs, Footer
   =========================================================== */

.md-header, .md-tabs, .md-footer{ background-color: var(--color-main) !important; }

.md-header .md-header__title,
.md-header .md-header__title .md-ellipsis,
.md-header a,
.md-header .md-header__button,
.md-header .md-header__button .md-icon,
.md-tabs__link,
.md-tabs__link .md-ellipsis,
.md-tabs__link .md-icon{
  color: var(--on-main-strong) !important; fill:currentColor !important; stroke:currentColor !important;
}

:where(.md-header a, .md-header__button, .md-tabs__link):hover,
:where(.md-header a, .md-header__button, .md-tabs__link):active{
  color: var(--on-main-strong) !important;
}

.md-tabs{ overflow:visible !important; }
.md-tabs__list{
  display:flex !important; flex-wrap:wrap !important; justify-content:center !important;
  gap:.4rem .8rem !important; padding:.5rem 1rem !important;
}
.md-tabs__item{ flex:0 1 auto !important; max-width:none !important; }
.md-tabs__link{ display:flex !important; flex-direction:column !important; align-items:center !important; gap:.2rem !important; padding:.6em .8em !important; line-height:1.2; }
.md-tabs__link .md-icon{ font-size:1.4rem; margin-bottom:.2em; }

.md-footer, .md-footer__inner, .md-footer-nav, .md-footer-meta{
  background-color: var(--color-main) !important; border-top:none !important;
}
.md-footer-nav{ display:flex !important; visibility:visible !important; opacity:1 !important; }
.md-footer-nav__link, .md-footer-nav__button, .md-footer__link,
.md-footer-nav__link *, .md-footer-nav__button *{
  color: inherit !important; fill: currentColor !important; stroke: currentColor !important;
}
.md-header, .md-footer{ overflow-x:hidden; }


/* ===========================================================
   2) Suche im Header – Pill
   =========================================================== */

.md-header .md-search__form{
  background-color: var(--md-primary-fg-color--dark) !important;
  border-radius: 12px !important;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.15) !important;
}
.md-header .md-search__input{ color: var(--on-main-dim) !important; }
.md-header .md-search__icon { color: var(--on-main-dim) !important; }
.md-header .md-search__input::placeholder{
  color: color-mix(in srgb, var(--on-main-dim) 70%, transparent) !important;
}
.md-header .md-search__form:focus-within{
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--on-main-strong) 35%, transparent) !important;
}


/* ===========================================================
   3) Seitenmenüs & TOC – Pills
   =========================================================== */

.md-sidebar--primary .md-nav__item--section > label.md-nav__link,
.md-sidebar--primary .md-nav__item--section > .md-nav__link.md-nav__link--index{
  background: var(--color-main) !important; color: var(--on-main-dim) !important;
  border-radius: 12px !important; padding:.40rem .70rem !important; width:100% !important;
  box-sizing:border-box !important; transition: padding .16s ease, box-shadow .16s ease, color .16s ease;
}
.md-sidebar--primary .md-nav__item--section > label.md-nav__link:hover,
.md-sidebar--primary .md-nav__item--section > .md-nav__link.md-nav__link--index:hover{
  padding:.50rem .90rem !important; box-shadow:0 0 0 .15rem rgba(0,0,0,.06); color:var(--on-main-strong) !important;
}

.md-sidebar--primary .md-nav__item--section .md-nav__item--section > label.md-nav__link,
.md-sidebar--primary .md-nav__item--section .md-nav__item--section > .md-nav__link.md-nav__link--index{
  background: var(--md-primary-fg-color--dark) !important; color: var(--on-main-dim) !important;
  border-radius: 12px !important; padding:.40rem .70rem !important; box-sizing:border-box !important;
  transition: padding .16s ease, box-shadow .16s ease, color .16s ease;
}
.md-sidebar--primary .md-nav__item--section .md-nav__item--section > label.md-nav__link:hover,
.md-sidebar--primary .md-nav__item--section .md-nav__item--section > .md-nav__link.md-nav__link--index:hover{
  padding:.50rem .90rem !important; box-shadow:0 0 0 .15rem rgba(0,0,0,.06); color:var(--on-main-strong) !important;
}
.md-sidebar--primary .md-nav__item--section .md-nav__item--section .md-nav__item--section > label.md-nav__link,
.md-sidebar--primary .md-nav__item--section .md-nav__item--section .md-nav__item--section > .md-nav__link.md-nav__link--index{
  background: color-mix(in srgb, var(--md-primary-fg-color--dark) 88%, #fff 12%) !important;
}

.md-sidebar--secondary, .md-nav--secondary{ overflow:visible; }
.md-nav--secondary .md-nav__title{
  background: var(--color-main) !important; color: var(--on-main-dim) !important;
  border-radius: 12px !important; padding:.40rem .70rem !important; margin:0 .5rem 0 .25rem !important;
  width:calc(100% - .75rem) !important; box-sizing:border-box !important;
  transition: padding .16s ease, box-shadow .16s ease, color .16s ease;
}
.md-nav--secondary .md-nav__title:hover{
  padding:.50rem .90rem !important; box-shadow:0 0 0 .15rem rgba(0,0,0,0.06); color:var(--on-main-strong) !important;
}

.md-nav--primary .md-nav__link,
.md-nav--secondary .md-nav__link{ color: var(--nav-text) !important; background:transparent !important; }
.md-nav__link::before{ content:none !important; }


/* ===========================================================
   4) „Lupe“-Effekt (nur Text)
   =========================================================== */

.md-header a, .md-header__button, .md-tabs__link,
.md-nav__link, .md-footer-nav__link, .md-footer__link, .md-footer-meta a{ transform:none !important; }

.md-tabs__link .md-ellipsis,
.md-header a .md-ellipsis,
.md-header__button .md-ellipsis,
.md-sidebar--primary .md-nav__item > .md-nav__link .md-ellipsis,
.md-nav--secondary .md-nav__link .md-ellipsis,
.md-footer-nav__link .md-ellipsis,
.md-footer__link .md-ellipsis,
.md-footer-meta a .md-ellipsis{ transition: font-size .18s ease, font-weight .18s ease; }

.md-tabs__link:hover .md-ellipsis,
.md-header a:hover .md-ellipsis,
.md-header__button:hover .md-ellipsis,
.md-sidebar--primary .md-nav__item > .md-nav__link:hover .md-ellipsis,
.md-nav--secondary .md-nav__link:hover .md-ellipsis,
.md-footer-nav__link:hover .md-ellipsis,
.md-footer__link:hover .md-ellipsis,
.md-footer-meta a:hover .md-ellipsis{ font-size: calc(1em * var(--zoom-font)); font-weight:700; }

.md-tabs__link--active .md-ellipsis,
.md-sidebar--primary .md-nav__item--active > .md-nav__link .md-ellipsis,
.md-sidebar--primary .md-nav__link--active .md-ellipsis,
.md-nav--secondary .md-nav__item--active > .md-nav__link .md-ellipsis,
.md-nav--secondary .md-nav__link--active .md-ellipsis{ font-size: calc(1em * var(--zoom-font-active)); font-weight:700; }


/* ===========================================================
   5) Content-Überschriften & Blöcke
   =========================================================== */

h1, h2, h3{ clear:both; font-weight:700; }
h1{ margin:2.5rem 0 1.5rem; font-size:2rem; line-height:1.3; }
h2{ margin:2rem 0 1.2rem !important; border-bottom:2px solid var(--color-main); padding-bottom:.3rem; }
h3{ margin:1.5rem 0 1rem !important; padding:0 0 .4rem .6rem !important; border-left:3px solid var(--color-accent); }
@media (max-width:768px){ h1{font-size:1.7rem;} h2{font-size:1.3rem;} h3{font-size:1.1rem;} }

.textbox, .textblock{
  border:3px solid var(--color-main); background-color:var(--md-default-bg-color);
  color:var(--md-default-fg-color); padding:1rem 1.5rem; margin:2rem auto; border-radius:8px;
  line-height:1.6; max-width:100%; box-sizing:border-box;
}
@media (min-width:768px){ .textbox, .textblock{ max-width:800px; } }

details.textbox, details.textblock{
  margin:1.5rem auto; border:2px solid var(--color-accent); border-radius:8px; overflow:hidden; max-width:100%;
}
@media (min-width:768px){ details.textbox, details.textblock{ max-width:800px; } }
details.textbox summary, details.textblock summary{
  background-color:var(--color-main); color:var(--on-main-strong); font-weight:700; padding:.75rem 1rem;
  cursor:pointer; list-style:none; position:relative;
}
details.textbox summary::after, details.textblock summary::after{
  content:"▶"; position:absolute; right:1rem; transition: transform .3s ease;
}
details.textbox[open] summary::after, details.textblock[open] summary::after{ transform:rotate(90deg); }
details.textbox > *:not(summary), details.textblock > *:not(summary){
  padding:1rem; background-color:var(--md-default-bg-color); color:var(--md-default-fg-color);
}
details.textbox[open], details.textblock[open]{ animation: tb-fadein .25s ease-in-out; }
@keyframes tb-fadein{ from{opacity:0} to{opacity:1} }

article img{ display:block; margin:1rem auto; max-width:80%; border-radius:.5rem; }
video, iframe{ max-width:100%; width:100%; height:auto; display:block; margin:1rem auto; }
.md-typeset a{ color: var(--link-color); }


/* ===========================================================
   6) Slider-UI (mittig, fix, nicht mitskaliert)
   =========================================================== */

.md-header__inner{ position:relative; z-index: 5; }

.scale-ctrl-bar{
  position:absolute; top:4px; left:50%; transform:translateX(-50%);
  z-index: 30; pointer-events:none; background:transparent; box-shadow:none;
}

.scale-ctrl{
  pointer-events:auto; display:inline-flex; align-items:center; gap:8px;
  font-size:14px; line-height:1; padding:6px 10px; border-radius:8px;
  background:var(--color-main); color:var(--on-main-strong);
  box-shadow:0 1px 2px rgba(0,0,0,.12), 0 0 0 1px color-mix(in srgb, var(--on-main-strong) 10%, transparent) inset;
}

.scale-ctrl__label{ font-weight:800; opacity:.95; user-select:none; }
.scale-ctrl__range{ width:180px; height:20px; accent-color: var(--on-main-strong); }
.scale-ctrl__btn{
  appearance:none; border:0; cursor:pointer; padding:6px 8px; border-radius:6px; font-weight:800;
  color:var(--on-main-strong); background: color-mix(in srgb, var(--on-main-strong) 10%, transparent);
}
.scale-ctrl__btn:focus-visible, .scale-ctrl__range:focus-visible{
  outline:2px solid color-mix(in srgb, var(--on-main-strong) 35%, transparent); outline-offset:2px;
}
@media (max-width:420px){ .scale-ctrl-bar{ display:none; } }


/* ===========================================================
   7) Mobile & Motion
   =========================================================== */

@media (hover:none) and (pointer:coarse){
  .md-sidebar--primary .md-nav__item--section > label.md-nav__link,
  .md-sidebar--primary .md-nav__item--section > .md-nav__link.md-nav__link--index{
    padding-block:.55rem !important;
  }
  .md-nav--secondary .md-nav__title{ padding-block:.55rem !important; }
  .md-footer, .md-footer__inner{ overflow-x:hidden; }
  .md-footer-nav{ display:flex; flex-wrap:wrap; gap:.5rem .75rem; }
  .md-footer-nav__link{ white-space:normal; overflow-wrap:anywhere; max-width:100%; padding-block:.65rem !important; }
}

@media (prefers-reduced-motion: reduce){
  .md-header a .md-ellipsis, .md-header__button .md-ellipsis, .md-tabs__link .md-ellipsis,
  .md-nav__link .md-ellipsis, .md-footer-nav__link .md-ellipsis, .md-footer__link .md-ellipsis,
  .md-footer-meta a .md-ellipsis{ transition:none; }
}
